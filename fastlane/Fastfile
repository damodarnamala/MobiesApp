default_platform(:ios)
platform :ios do
	desc "Runniing all tests"
	lane :run_test do
		scan(
			project:"MoviesApp.xcodeproj",
			scheme: "MoviesApp",
			output_directory: "Reports/Scan",
			clean: true,
			code_coverage: true,
			device: "iPhone 13 Pro Max",
		)
	end

	desc "Coverage xcov.."
  lane :run_xcov do
    xcov(
      project:"MoviesApp.xcodeproj",
      scheme: "MoviesApp",
      output_directory: "Reports/Xcov",
      html_report:true,
      markdown_report:true,
      source_directory:"MoviesApp"
    )
  end

  desc "Coverage xcov.."
  lane :run_coverage do
    slather(
      proj: "MoviesApp.xcodeproj",
      scheme: "MoviesApp",
      output_directory: "./Reports/Slather",
      source_directory: "MoviesApp",
      cobertura_xml: true,
      arch: "x86_64",
      html: true,
      sonarqube_xml: true,
      json: true,
      show: true
    )
  end
end


